{"version":3,"sources":["pages/home-page/utils.ts","services/service.ts","services/requestPath.ts","services/request.ts","services/admin/service.ts","pages/backstage/user-list/index.tsx","pages/backstage/article-list/index.tsx","pages/backstage/utils.ts","pages/backstage/category-list/index.tsx","pages/backstage/banner-list/components/upload/index.tsx","pages/backstage/banner-list/components/img-card/index.tsx","pages/backstage/banner-list/index.tsx","pages/backstage/default/index.tsx","pages/backstage/index.tsx","services/article/service.ts","services/user/service.ts","services/category/service.ts"],"names":["isPhone","phone","test","checkRegisterPassword","passwd","cpasswd","getBannerList","request","get","REQUEST_PATH","instance","axios","create","baseURL","timeout","withCredentials","interceptors","use","config","headers","error","console","warn","Promise","reject","response","data","url","params","post","qs","stringify","getUserList","addCategory","deleteObject","objectName","uploadBanner","filePost","addBanner","Search","Input","UserList","columns","title","dataIndex","key","width","render","text","record","username","onConfirm","onConfirmDelOne","_id","okText","cancelText","href","page","keyword","state","userList","loading","visible","selectedDataIds","pagination","total","current","tel","password","componentDidMount","then","res","setState","delUsers","message","success","msg","ids","onConfirmDelMany","onSelectChange","hanleTableChange","onOpenModal","onCloseModal","onChangeTel","e","target","value","onChangePassword","onConfirmAddUser","register","onSearchUser","this","rowSelection","onChange","hasSelected","length","className","Item","placeholder","onSearch","style","marginLeft","type","onClick","float","disabled","dataSource","rowKey","size","onOk","onCancel","centered","destroyOnClose","padding","allowClear","React","Component","ArticleList","ellipsis","tags","map","tag","index","color","toUpperCase","to","category","articleList","getArticleList","onSearchArticle","delArticle","newArticleList","forEach","item","newItem","JSON","parse","author","typeName","push","getArticleListDataSource","scroll","x","CategoryList","typeId","categoryList","getCategoryList","delCategories","onChangeTypeId","onChangeTypeName","onConfirmAddCategory","Upload","onChangeUpload","file","files","props","ImgCard","onDeleteImg","onDelete","src","alt","BannerList","bannerList","onDeleteCurrentImg","upload","img","formdata","FormData","append","name","path","Default","SubMenu","Menu","Header","Layout","Sider","Content","Footer","NAV_LINK","link","iconType","BackStage","defaultSelectedKeys","defaultOpenKeys","collapsed","userData","avatar","location","pathname","slice","some","getPersonalData","admin","history","onCollapse","minHeight","collapsible","theme","mode","exact","component","textAlign","getArticleListOfType","getArticleListOfUser","getArticleDetails","getArticleComments","addArticleComment","praiseArticle","addArticle","updateArticle","deleteArticle","collectArticle","getCollectionList","cancelCollection","login","logout","getUserData","updateUserData","updateAvatar","updatePassword","uploadAvatar"],"mappings":"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","file":"static/js/12.5ae389de.chunk.js","sourcesContent":["/**\n * 验证手机号格式是否正确\n * @param phone 手机号\n */\nexport function isPhone(phone: string): boolean {\n  let reg = /^1((3[\\d])|(4[5,6,9])|(5[0-3,5-9])|(6[5-7])|(7[0-8])|(8[1-3,5-8])|(9[1,8,9]))\\d{8}$/;\n  if (!reg.test(phone)) {\n    return false;\n  } else {\n    return true;\n  }\n}\n\n/**\n * 0: 正确, 1: 密码为空, 2: 两次密码不一致\n * @param passwd 密码\n * @param cpasswd 确认密码\n */\nexport function checkRegisterPassword(passwd: string, cpasswd: string): number {\n  if (passwd !== '') {\n    if (passwd === cpasswd) {\n      return 0;\n    } else {\n      return 2;\n    }\n  } else {\n    return 1;\n  }\n}\n\n","import { request } from \"./request\";\n\n\n/**\n * 获取banner列表\n */\nexport function getBannerList() {\n  return request.get('/img/get/banner', {});\n}","const NODE_EDV = process.env.NODE_ENV;\n\nlet REQUEST_PATH: string = '';\n\nif (NODE_EDV === 'development') {\n  REQUEST_PATH = 'http://127.0.0.1:3000';\n} else {\n  REQUEST_PATH = 'http://127.0.0.1';\n}\n\nexport default REQUEST_PATH;","import axios from 'axios';\nimport qs from 'qs';\nimport REQUEST_PATH from './requestPath';\n\n/**\n * 自定义实例默认值\n */\nconst instance = axios.create({\n  baseURL: REQUEST_PATH,\n  timeout: 5000, // 请求超时时间\n  withCredentials: true,\n});\n\n/**\n * 添加请求拦截器 ，意思就是发起请求接口之前做什么事，一般都会发起加载一个loading\n */\ninstance.interceptors.request.use(\n  config => {\n    // 在发送请求之前做些什么（... 这里写你的展示loading的逻辑代码 ）\n    // 获取token，配置请求头\n    config.headers['Content-Type'] = 'application/x-www-form-urlencoded';\n    return config;\n  },\n  error => {\n    // 对请求错误做些什么，处理这个错误\n    // 可以直接处理或者展示出去,toast show()\n    console.warn(error);\n    return Promise.reject(error);\n  }\n);\n/**\n * 添加响应拦截器\n */\ninstance.interceptors.response.use(\n  response => {\n    let res = response.data;\n    return res;\n  },\n  error => {\n    //响应错误\n    // console.log(error)\n    return Promise.reject(error);\n  }\n)\n/**\n * 使用es6中的类，进行简单封装\n */\nexport class request {\n  // 使用async ... await\n  static async get(url: string, params: any) {\n    return await instance.get(url, {\n      params: params\n    });\n  }\n  static async post(url: string, params: any) {\n    return await instance.post(url, qs.stringify(params));\n  }\n  static async filePost(url: string, params: any) {\n    return await instance.post(url, params);\n  }\n};","import { request } from '../request';\nimport { GetUserListPramasType, AddCategoryParamsType, AddBannerParamsType } from './data';\nimport { AxiosResponse } from 'axios';\n\n/**\n * 获取用户列表\n */\nconst getUserList = (params: GetUserListPramasType): Promise<AxiosResponse<any>> => {\n  return request.get('/admin/get/userlist', params);\n}\n\n/**\n * 添加分类\n */\nconst addCategory = (params: AddCategoryParamsType): Promise<AxiosResponse<any>> => {\n  return request.post('/admin/add/category', params);\n}\n\n/**\n * 删除对象\n */\nconst deleteObject = (params: any, objectName: string): Promise<AxiosResponse<any>> => {\n  return request.post(`/admin/delete/${objectName}`, params);\n}\n\n/**\n * 上传banner图到服务器\n */\nconst uploadBanner = (params: any): Promise<AxiosResponse<any>> => {\n  return request.filePost('/img/upload/banner', params);\n}\n\n/**\n * 添加banner图\n */\nconst addBanner = (params: AddBannerParamsType): Promise<AxiosResponse<any>> => {\n  return request.post('/admin/add/banner', params);\n}\n\nexport {\n  getUserList,\n  addCategory,\n  deleteObject,\n  uploadBanner,\n  addBanner,\n}","import React, { ReactPropTypes } from 'react';\nimport { Breadcrumb, Table, Popconfirm, message, Button, Modal, Input, Card } from 'antd';\nimport { LoginParamsType } from '../../../services/user/data';\nimport { isPhone } from '../../home-page/utils';\nimport { register } from '../../../services/user/service';\nimport { getUserList, deleteObject } from '../../../services/admin/service';\nimport { GetUserListPramasType, DelObjectParamsType } from '../../../services/admin/data';\nimport { UserType } from '../../data';\n\nexport interface IState {\n  userList: UserType[];\n  loading: boolean;\n  visible: boolean;\n  selectedDataIds: number[] | string[];\n  pagination: any;\n  tel: string;\n  password: string;\n}\n\nconst { Search } = Input;\n\nclass UserList extends React.Component<ReactPropTypes, IState> {\n\n  // 表列项\n  private columns = [\n    {\n      title: '_id',\n      dataIndex: '_id',\n      key: '_id',\n      width: 350,\n    },\n    {\n      title: '用户名',\n      dataIndex: 'username',\n      key: 'username',\n    },\n    {\n      title: '手机号',\n      dataIndex: 'tel',\n      key: 'tel',\n    },\n    {\n      title: '创建时间',\n      dataIndex: 'createdDate',\n      key: 'createdDate',\n    },\n    {\n      title: '操作',\n      key: 'action',\n      render: (text: any, record: any) => (\n        <span>\n          <Popconfirm\n            title={`你确定要删除 “${record.username}” 吗？`}\n            onConfirm={() => this.onConfirmDelOne(record._id)}\n            okText=\"确定\"\n            cancelText=\"取消\"\n          >\n            <a href=\"/\">删除</a>\n          </Popconfirm>\n        </span>\n      ),\n    },\n  ];\n\n  private params: GetUserListPramasType = {\n    page: 1,\n    keyword: '',\n  }\n\n  state = {\n    userList: [],\n    loading: true,\n    visible: false,\n    selectedDataIds: [],\n    pagination: {\n      total: 0,\n      current: 1,\n    },\n    tel: '',\n    password: '',\n  }\n\n  componentDidMount = () => {\n    this.getUserList();\n  }\n\n  /**\n   * 获取用户数据\n   */\n  getUserList = () => {\n    getUserList(this.params).then((res: any) => {\n      let { userList, pagination } = this.state;\n      userList = res.data;\n      pagination.total = res.total;\n      this.setState({ userList, pagination, loading: false });\n    })\n  }\n\n  /**\n   * 删除用户\n   */\n  delUsers = (params: DelObjectParamsType) => {\n    deleteObject(params, 'user').then((res: any) => {\n      if (res.state === 200) {\n        message.success('删除成功！', 2);\n        this.getUserList();\n      } else {\n        message.error(res.msg);\n      }\n    })\n  }\n\n  /**\n   * 确认删除用户 - 单项\n   */\n  onConfirmDelOne = (ids: string) => {\n    const params: DelObjectParamsType = { ids: [ids] };\n    this.delUsers(params);\n  }\n  /**\n   * 确认删除用户 - 批量\n   */\n  onConfirmDelMany = () => {\n    const params: DelObjectParamsType = { ids: this.state.selectedDataIds };\n    this.delUsers(params);\n  }\n\n  /**\n   * 选择要操作的数据\n   */\n  onSelectChange = (selectedDataIds: number[] | string[]) => {\n    this.setState({ selectedDataIds });\n  };\n\n  /**\n   * 分页\n   */\n  hanleTableChange = (pagination: any): void => {\n    this.params.page = pagination.current;\n    this.getUserList();\n  }\n\n  /**\n   * 打开新增用户弹窗\n   */\n  onOpenModal = () => {\n    this.setState({\n      visible: true,\n    });\n  }\n\n  /**\n   * 关闭新增用户弹窗\n   */\n  onCloseModal = () => {\n    this.setState({\n      visible: false,\n      tel: '',\n      password: ''\n    });\n  }\n\n  /**\n   * 新增用户 - 手机号\n   */\n  onChangeTel = (e: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ tel: e.target.value });\n  }\n\n  /**\n   * 新增用户 - 密码\n   */\n  onChangePassword = (e: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ password: e.target.value });\n  }\n\n  /**\n   * 新增用户\n   */\n  onConfirmAddUser = () => {\n    const params: LoginParamsType = {\n      tel: this.state.tel,\n      password: this.state.password,\n    };\n    if (isPhone(params.tel)) {\n      register(params).then((res: any) => {\n        if (res.state === 0) {\n          message.success('新增成功！', 1.5, () => {\n            this.setState({ visible: false, tel: '', password: '' });\n            this.getUserList();\n          });\n        } else {\n          message.error(res.msg);\n        }\n      })\n    } else {\n      message.error('手机号格式错误！');\n    }\n  }\n\n  /**\n   * 搜索用户\n   */\n  onSearchUser = (value: string) => {\n    this.params = {\n      page: 1,\n      keyword: value\n    };\n    this.getUserList();\n  }\n\n  render() {\n    const { selectedDataIds } = this.state;\n    const rowSelection = {\n      selectedDataIds,\n      onChange: this.onSelectChange,\n    };\n    const hasSelected = selectedDataIds.length > 0;\n\n    return (\n      <>\n        <Breadcrumb className=\"breadcrumb\">\n          <Breadcrumb.Item>对象管理</Breadcrumb.Item>\n          <Breadcrumb.Item>用户管理</Breadcrumb.Item>\n        </Breadcrumb>\n\n        <Card className=\"action-card\">\n          <div className=\"row\">\n            <span>搜索用户：</span>\n            <Search\n              placeholder=\"手机号/用户名\"\n              onSearch={value => this.onSearchUser(value)}\n              style={{ width: 220, marginLeft: 5 }}\n            />\n            <Button type=\"primary\" onClick={this.onOpenModal} style={{ float: 'right' }}>新增用户</Button>\n          </div>\n        </Card>\n\n        <div className=\"card\">\n          <div className=\"row\">\n            {\n              hasSelected ?\n                <Popconfirm\n                  title={`你确定要删除这些数据吗？`}\n                  onConfirm={() => this.onConfirmDelMany()}\n                  okText=\"确定\"\n                  cancelText=\"取消\"\n                >\n                  <Button type=\"primary\" disabled={!hasSelected}>批量删除</Button>\n                </Popconfirm> :\n                <Button type=\"primary\" disabled={!hasSelected}>批量删除</Button>\n            }\n          </div>\n          <Table\n            rowSelection={rowSelection}\n            columns={this.columns}\n            dataSource={this.state.userList}\n            rowKey={record => record._id}\n            loading={this.state.loading}\n            pagination={this.state.pagination}\n            onChange={this.hanleTableChange}\n            size=\"middle\"\n          />\n          <Modal\n            title=\"新增用户\"\n            visible={this.state.visible}\n            onOk={this.onConfirmAddUser}\n            onCancel={this.onCloseModal}\n            okText=\"确认\"\n            cancelText=\"取消\"\n            centered\n            destroyOnClose\n          >\n            <div style={{ padding: '0 20%' }}>\n              <Input placeholder=\"输入用户手机号\" allowClear onChange={this.onChangeTel} />\n              <br />\n              <br />\n              <Input placeholder=\"输入密码\" allowClear onChange={this.onChangePassword} />\n            </div>\n          </Modal>\n        </div>\n      </>\n    )\n  }\n}\n\nexport default UserList;","import React, { ReactPropTypes } from 'react';\nimport { Breadcrumb, Popconfirm, Table, Button, message, Divider, Tag, Card, Input } from 'antd';\nimport { deleteObject } from '../../../services/admin/service';\nimport { GetArticleListParamsType } from '../../../services/article/data';\nimport { getArticleList } from '../../../services/article/service';\nimport { getArticleListDataSource } from '../utils';\nimport { Link } from 'react-router-dom';\nimport { ColumnProps } from 'antd/es/table';\nimport { ArticleType } from '../../data';\nimport { DelObjectParamsType } from '../../../services/admin/data';\n\nexport interface ArticleDataType extends ArticleType {\n  _id: string;\n}\n\ninterface IState {\n  articleList: ArticleDataType[];\n  selectedDataIds: string[] | number[];\n  pagination: any;\n}\n\nconst { Search } = Input;\n\nclass ArticleList extends React.Component<ReactPropTypes, IState> {\n  // 表列项\n  private columns: ColumnProps<ArticleDataType>[] = [\n    {\n      title: '_id',\n      dataIndex: '_id',\n      key: '_id',\n      width: 250,\n    },\n    {\n      title: '文章标题',\n      dataIndex: 'title',\n      key: 'title',\n      width: 400,\n      ellipsis: true,\n    },\n    {\n      title: '分类',\n      dataIndex: 'category',\n      key: 'category',\n      width: 150,\n    },\n    {\n      title: '标签',\n      dataIndex: 'tags',\n      key: 'tags',\n      width: 300,\n      ellipsis: true,\n      render: (tags: []) => (\n        <span>\n          {\n            tags.length > 0 ?\n              tags.map((tag: string, index: number) => {\n                let color = (index % 2 === 0) ? 'geekblue' : 'green';\n                return (\n                  <Tag color={color} key={tag}>\n                    {tag.toUpperCase()}\n                  </Tag>\n                );\n              }) :\n              <Tag>暂无</Tag>\n          }\n        </span>\n      ),\n    },\n    {\n      title: '阅读量',\n      dataIndex: 'views',\n      key: 'views',\n      width: 120,\n    },\n    {\n      title: '获赞数',\n      dataIndex: 'likes',\n      key: 'likes',\n      width: 120,\n    },\n    {\n      title: '作者',\n      dataIndex: 'author',\n      key: 'author',\n      width: 250,\n      ellipsis: true,\n    },\n    {\n      title: '发表时间',\n      dataIndex: 'date',\n      key: 'date',\n      width: 300,\n      ellipsis: true,\n    },\n    {\n      title: '操作',\n      key: 'action',\n      width: 120,\n      render: (text: any, record: any) => (\n        <span>\n          <Link to={`/article/${record._id}`} target=\"_blank\">查看</Link>\n          <Divider type=\"vertical\" />\n          <Popconfirm\n            title={`你确定要删除这篇文章吗？`}\n            onConfirm={() => this.onConfirmDelOne(record._id)}\n            okText=\"确定\"\n            cancelText=\"取消\"\n          >\n            <a href=\"/\">删除</a>\n          </Popconfirm>\n        </span>\n      ),\n\n    },\n  ]\n\n  private params: GetArticleListParamsType = {\n    page: 1,\n    category: '0',\n    keyword: '',\n  }\n\n  state = {\n    articleList: [],\n    selectedDataIds: [],\n    pagination: {\n      total: 0\n    },\n  }\n\n  componentDidMount = () => {\n    this.getArticleList();\n  }\n\n  /**\n   * 获取文章列表\n   */\n  getArticleList = () => {\n    getArticleList(this.params).then((res: any) => {\n      let { articleList, pagination } = this.state;\n      articleList = res.data;\n      pagination.total = res.total;\n      this.setState({ articleList, pagination });\n    });\n  }\n\n  /**\n   * 选择要操作的数据\n   */\n  onSelectChange = (selectedDataIds: number[] | string[]) => {\n    this.setState({ selectedDataIds });\n  };\n\n  /**\n   * 分页\n   */\n  hanleTableChange = (pagination: any) => {\n    this.params.page = pagination.current;\n    this.getArticleList();\n  }\n\n  /**\n   * 搜索文章\n   */\n  onSearchArticle = (value: string): void => {\n    this.params = {\n      page: 1,\n      keyword: value,\n      category: '0',\n    };\n    this.getArticleList();\n  }\n\n  /**\n   * 删除文章\n   */\n  delArticle = (params: DelObjectParamsType) => {\n    deleteObject(params, 'article').then((res: any) => {\n      if (res.state === 200) {\n        message.success('删除成功！', 2);\n        this.getArticleList();\n      } else {\n        message.error(res.msg);\n      }\n    })\n  }\n\n  /**\n   * 确认删除文章 - 单项\n   */\n  onConfirmDelOne = (ids: string) => {\n    const params: DelObjectParamsType = { ids: [ids] };\n    this.delArticle(params);\n  }\n\n  /**\n   * 确认删除文章 - 批量\n   */\n  onConfirmDelMany = () => {\n    const params: DelObjectParamsType = { ids: this.state.selectedDataIds };\n    this.delArticle(params);\n  }\n\n  render() {\n    const { pagination, selectedDataIds } = this.state;\n    const rowSelection = {\n      selectedDataIds,\n      onChange: this.onSelectChange,\n    };\n    const hasSelected = selectedDataIds.length > 0;\n    const articleList: ArticleDataType[] = getArticleListDataSource(this.state.articleList);\n\n    return (\n      <>\n        <Breadcrumb className=\"breadcrumb\">\n          <Breadcrumb.Item>对象管理</Breadcrumb.Item>\n          <Breadcrumb.Item>文章管理</Breadcrumb.Item>\n        </Breadcrumb>\n\n        <Card className=\"action-card\">\n          <div className=\"row\">\n            <span>搜索文章：</span>\n            <Search\n              placeholder=\"标题\"\n              onSearch={value => this.onSearchArticle(value)}\n              style={{ width: 220, marginLeft: 5 }}\n            />\n          </div>\n        </Card>\n\n        <div className=\"card\">\n          <div className=\"row\">\n            {\n              hasSelected ?\n                <Popconfirm\n                  title={`你确定要删除这些数据吗？`}\n                  onConfirm={() => this.onConfirmDelMany()}\n                  okText=\"确定\"\n                  cancelText=\"取消\"\n                >\n                  <Button type=\"primary\" disabled={!hasSelected}>批量删除</Button>\n                </Popconfirm> :\n                <Button type=\"primary\" disabled={!hasSelected}>批量删除</Button>\n            }\n          </div>\n\n          <Table\n            scroll={{ x: 2000 }}\n            rowSelection={rowSelection}\n            columns={this.columns}\n            dataSource={articleList}\n            rowKey={record => record._id}\n            pagination={pagination}\n            onChange={this.hanleTableChange}\n            size=\"middle\"\n          />\n        </div>\n      </>\n    )\n  }\n}\n\nexport default ArticleList;","import { ArticleDataType } from \"./article-list/index\";\n\n/**\n * 获取符合表格的数据源\n * @param articleList 原文章列表\n */\nconst getArticleListDataSource = (articleList: ArticleDataType[]): ArticleDataType[] => {\n  let newArticleList: ArticleDataType[] = [];\n\n  articleList.forEach((item: any) => {\n    const newItem = JSON.parse(JSON.stringify(item));\n    newItem.author = item.author.username;\n\n    if (item.category) {\n      newItem.category = item.category.typeName;\n    } else {\n      newItem.category = '暂无分类';\n    }\n\n    newArticleList.push(newItem);\n  })\n\n  return newArticleList;\n}\n\nexport {\n  getArticleListDataSource\n}\n","import React, { ReactPropTypes } from 'react';\nimport { Breadcrumb, Popconfirm, Table, Button, message, Modal, Input } from 'antd';\nimport { DelObjectParamsType, AddCategoryParamsType } from '../../../services/admin/data';\nimport { CategoryType } from '../../data';\nimport { getCategoryList } from '../../../services/category/service';\nimport { addCategory, deleteObject } from '../../../services/admin/service';\n\ninterface IState {\n  loading: boolean;\n  visible: boolean;\n  typeId: string;\n  typeName: string;\n  selectedDataIds: string[] | number[];\n  categoryList: CategoryType[];\n}\n\nclass CategoryList extends React.Component<ReactPropTypes, IState> {\n\n  // 表列项\n  private columns = [\n    {\n      title: '_id',\n      dataIndex: '_id',\n      key: '_id',\n      width: 350,\n    },\n    {\n      title: '分类名称',\n      dataIndex: 'typeName',\n      key: 'typeName',\n      width: 200,\n    },\n    {\n      title: '分类id',\n      dataIndex: 'typeId',\n      key: 'typeId',\n      width: 200,\n    },\n    {\n      title: '创建者',\n      dataIndex: 'creator',\n      key: 'creator',\n    },\n    {\n      title: '创建时间',\n      dataIndex: 'createdDate',\n      key: 'createdDate',\n    },\n    {\n      title: '操作',\n      key: 'action',\n      render: (text: any, record: any) => (\n        <span>\n          <Popconfirm\n            title={`你确定要删除 “${record.typeName}” 分类吗？`}\n            onConfirm={() => this.onConfirmDelOne(record._id)}\n            okText=\"确定\"\n            cancelText=\"取消\"\n          >\n            <a href=\"/\">删除</a>\n          </Popconfirm>\n        </span>\n      ),\n    },\n  ];\n\n  state = {\n    loading: true,\n    visible: false,\n    typeId: '',\n    typeName: '',\n    selectedDataIds: [],\n    categoryList: [],\n  }\n\n  componentDidMount = () => {\n    this.getCategoryList();\n  }\n\n  /**\n   * 获取分类列表\n   */\n  getCategoryList = () => {\n    getCategoryList().then((res: any) => {\n      this.setState({ categoryList: res.data, loading: false });\n    })\n  }\n\n  /**\n   * 删除分类\n   */\n  delCategories = (params: DelObjectParamsType) => {\n    deleteObject(params, 'category').then((res: any) => {\n      if (res.state === 200) {\n        message.success('删除成功！', 2);\n        this.getCategoryList();\n      } else {\n        message.error(res.msg);\n      }\n    })\n  }\n\n  /**\n   * 选择要操作的数据\n   */\n  onSelectChange = (selectedDataIds: number[] | string[]) => {\n    this.setState({ selectedDataIds });\n  };\n\n  /**\n * 打开新增分类弹窗\n */\n  onOpenModal = () => {\n    this.setState({\n      visible: true,\n    });\n  }\n\n  /**\n   * 关闭新增分类弹窗\n   */\n  onCloseModal = () => {\n    this.setState({\n      visible: false,\n      typeId: '',\n      typeName: '',\n    });\n  }\n\n  /**\n   * 确认删除分类 - 单项\n   */\n  onConfirmDelOne = (ids: string) => {\n    const params: DelObjectParamsType = { ids: [ids] };\n    this.delCategories(params);\n  }\n\n  /**\n   * 确认删除分类 - 批量\n   */\n  onConfirmDelMany = () => {\n    const params: DelObjectParamsType = { ids: this.state.selectedDataIds };\n    this.delCategories(params);\n  }\n\n  /**\n   * 新增分类 - 分类id\n   */\n  onChangeTypeId = (e: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ typeId: e.target.value });\n  }\n\n  /**\n   * 新增分类 - 名称\n   */\n  onChangeTypeName = (e: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ typeName: e.target.value });\n  }\n\n  /**\n   * 新增分类\n   */\n  onConfirmAddCategory = () => {\n    const params: AddCategoryParamsType = { typeId: this.state.typeId, typeName: this.state.typeName };\n    addCategory(params).then((res: any) => {\n      if (res.state === 200) {\n        message.success('添加成功！', 1.5, () => {\n          this.setState({ visible: false, typeId: '', typeName: '' });\n          this.getCategoryList();\n        });\n      } else {\n        message.error(res.msg);\n      }\n    })\n  }\n\n  render() {\n    const { selectedDataIds } = this.state;\n    const rowSelection = {\n      selectedDataIds,\n      onChange: this.onSelectChange,\n    };\n    const hasSelected = selectedDataIds.length > 0;\n\n    return (\n      <>\n        <Breadcrumb className=\"breadcrumb\">\n          <Breadcrumb.Item>对象管理</Breadcrumb.Item>\n          <Breadcrumb.Item>分类管理</Breadcrumb.Item>\n        </Breadcrumb>\n\n        <div className=\"card\">\n          <div className=\"row\">\n            {\n              hasSelected ?\n                <Popconfirm\n                  title={`你确定要删除这些数据吗？`}\n                  onConfirm={() => this.onConfirmDelMany()}\n                  okText=\"确定\"\n                  cancelText=\"取消\"\n                >\n                  <Button type=\"primary\" disabled={!hasSelected}>批量删除</Button>\n                </Popconfirm> :\n                <Button type=\"primary\" disabled={!hasSelected}>批量删除</Button>\n            }\n            <Button type=\"primary\" onClick={this.onOpenModal}>新增分类</Button>\n          </div>\n\n          <Table\n            rowSelection={rowSelection}\n            columns={this.columns}\n            dataSource={this.state.categoryList}\n            rowKey={record => record._id}\n            loading={this.state.loading}\n          />\n          <Modal\n            title=\"新增分类\"\n            visible={this.state.visible}\n            onOk={this.onConfirmAddCategory}\n            onCancel={this.onCloseModal}\n            okText=\"确认\"\n            cancelText=\"取消\"\n            centered\n            destroyOnClose\n          >\n            <div style={{ padding: '0 20%' }}>\n              <Input placeholder=\"输入分类ID\" allowClear onChange={this.onChangeTypeId} />\n              <br />\n              <br />\n              <Input placeholder=\"输入分类名称\" allowClear onChange={this.onChangeTypeName} />\n            </div>\n          </Modal>\n        </div>\n      </>\n    )\n  }\n}\n\nexport default CategoryList;","import React from 'react';\nimport { Icon } from 'antd';\nimport './style.less';\n\ninterface UploadPropsType {\n  uploadBanner: (file: any) => void;\n}\n\nclass Upload extends React.Component<UploadPropsType> {\n\n  /**\n   * 上传banner图\n   */\n  onChangeUpload = (e: any) => {\n    const file = e.target.files[0];\n    this.props.uploadBanner(file);\n  }\n\n  render() {\n    return (\n      <div className=\"upload\">\n        <span className=\"action\">\n          <input type=\"file\" title=\"\" onChange={this.onChangeUpload} />\n          <div>\n            <Icon type=\"plus\" className=\"plus\" />\n            <p>Upload</p>\n          </div>\n        </span>\n      </div >\n    )\n  }\n}\n\nexport default Upload;","import React from 'react';\nimport { Icon } from 'antd';\nimport './style.less';\n\ninterface ImgCardPropsType {\n  src: string;\n  onDelete: () => void;\n}\n\nclass ImgCard extends React.Component<ImgCardPropsType> {\n\n  /**\n   * 删除图片\n   */\n  onDeleteImg = () => {\n    this.props.onDelete();\n  }\n\n  render() {\n    const { src } = this.props;\n    return (\n      <div className=\"img-card\">\n        <div className=\"preview\">\n          <img src={`http://127.0.0.1${src}`} alt=\"\" />\n          <div className=\"mask\">\n            <Icon type=\"eye\" title=\"预览大图\" />\n            <Icon type=\"delete\" title=\"删除图片\" onClick={this.onDeleteImg} />\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default ImgCard;","import React, { ReactPropTypes } from 'react';\nimport Upload from './components/upload';\nimport ImgCard from './components/img-card';\nimport { Breadcrumb, message } from 'antd';\nimport { uploadBanner, deleteObject, addBanner } from '../../../services/admin/service';\nimport { getBannerList } from '../../../services/service';\nimport { BannerType } from '../../data';\n\ninterface IState {\n  bannerList: BannerType[];\n}\n\nclass BannerList extends React.Component<ReactPropTypes, IState> {\n\n  state = {\n    bannerList: [],\n  }\n\n  componentDidMount = () => {\n    this.getBannerList();\n  }\n\n  /**\n   * 获取banner列表\n   */\n  getBannerList = () => {\n    getBannerList().then(res => {\n      this.setState({ bannerList: res.data });\n    })\n  }\n\n  /**\n   * 删除banner图\n   */\n  onDeleteCurrentImg = (ids: string) => {\n    const params = { ids };\n    deleteObject(params, 'banner').then((res: any) => {\n      if (res.state === 200) {\n        message.success('删除成功！', 2);\n        this.getBannerList();\n      } else {\n        message.error(res.msg);\n      }\n    })\n  }\n\n  /**\n   * 上传图片\n   */\n  upload = (img: any) => {\n    const formdata = new FormData();\n    formdata.append('file', img);\n\n    uploadBanner(formdata).then((res: any) => {\n      if (res.state === 200) {\n        const params = { name: res.data.name, path: res.data.path };\n        addBanner(params).then((res: any) => {\n          if (res.state === 200) {\n            message.success('上传成功！', 2);\n            this.getBannerList();\n          }\n        })\n      } else {\n        message.error(res.msg);\n      }\n    })\n  }\n\n  render() {\n    const { bannerList } = this.state;\n\n    return (\n      <>\n        <Breadcrumb className=\"breadcrumb\">\n          <Breadcrumb.Item>封面图设置</Breadcrumb.Item>\n        </Breadcrumb>\n\n        <div className=\"card\">\n          {bannerList.map((item: BannerType) => (\n            <ImgCard\n              key={item.path}\n              src={item.path}\n              onDelete={() => this.onDeleteCurrentImg(item._id)} />\n          ))}\n          {\n            bannerList.length < 5 && <Upload uploadBanner={this.upload} />\n          }\n        </div>\n      </>\n    )\n  }\n}\n\nexport default BannerList;","import React from 'react';\n\nclass Default extends React.Component {\n  render() {\n    return (\n      <div className=\"default\">\n        欢迎进入开发者技术交流社区后台管理系统！\n      </div>\n    )\n  }\n}\n\nexport default Default;","import React from 'react';\nimport UserList from './user-list';\nimport ArticleList from './article-list';\nimport CategoryList from './category-list';\nimport BannerList from './banner-list';\nimport Default from './default';\nimport { Layout, Menu, Icon } from 'antd';\nimport { Route, Link, RouteComponentProps } from 'react-router-dom';\nimport { getPersonalData } from '../../services/user/service';\nimport { UserType } from '../data';\nimport './style.less';\n\n\nconst { SubMenu } = Menu;\nconst { Header, Sider, Content, Footer } = Layout;\n\nconst NAV_LINK = [\n  { title: '用户管理', link: 'user-management', iconType: 'user' },\n  { title: '文章管理', link: 'article-management', iconType: 'read' },\n  { title: '分类管理', link: 'category-management', iconType: 'tag' },\n]\n\ninterface IState {\n  collapsed: boolean;\n  userData: UserType;\n}\n\nclass BackStage extends React.Component<RouteComponentProps, IState> {\n\n  private defaultSelectedKeys: string[] = [''];\n  private defaultOpenKeys: string[] = [''];\n\n  state = {\n    collapsed: false,\n    userData: {\n      _id: '',\n      avatar: '',\n      username: '',\n    }\n  };\n\n  componentDidMount = () => {\n    const type = this.props.location.pathname.slice(7) || '';\n\n    this.defaultSelectedKeys.push(type);\n\n    if (NAV_LINK.some(item => item.link === type)) {\n      this.defaultOpenKeys.push('object-management');\n    }\n\n    // 获取当前登录人信息\n    getPersonalData().then((res: any) => {\n      if (res.state === 302 || !res.data.admin) {\n        this.props.history.push('/exception/404');\n      } else {\n        this.setState({ userData: res.data });\n      }\n    })\n\n  }\n\n  onCollapse = (collapsed: boolean) => {\n    this.setState({ collapsed });\n  };\n\n  render() {\n    const { userData } = this.state;\n\n    return (\n      <Layout style={{ minHeight: '100vh' }}>\n        <Sider collapsible collapsed={this.state.collapsed} onCollapse={this.onCollapse} width=\"250\">\n          <div className=\"logo\">\n            <Link to=\"/admin\" className={this.state.collapsed ? 'small' : 'normal'}>DTEC</Link>\n          </div>\n          <Menu theme=\"dark\"\n            defaultSelectedKeys={this.defaultSelectedKeys}\n            defaultOpenKeys={this.defaultOpenKeys}\n            mode=\"inline\">\n\n            <SubMenu\n              key=\"object-management\"\n              title={\n                <span>\n                  <Icon type=\"apartment\" />\n                  <span>对象管理</span>\n                </span>\n              }\n            >\n              {NAV_LINK.map(item => (\n                <Menu.Item key={item.link}>\n                  <Link to={`/admin/${item.link}`}><Icon type={item.iconType} /><span>{item.title}</span></Link>\n                </Menu.Item>\n              ))}\n            </SubMenu>\n            <Menu.Item key=\"banner-management\">\n              <Link to=\"/admin/banner-management\"><Icon type=\"picture\" /><span>封面图设置</span></Link>\n            </Menu.Item>\n          </Menu>\n        </Sider>\n        <Layout>\n          <Header className=\"backstage-header\">\n            <div className=\"username\">\n              <span className=\"avatar\">\n                <img src={`http://127.0.0.1${userData.avatar}`} alt=\"avatar\" />\n              </span>\n              <span>{userData.username}</span>\n            </div>\n          </Header>\n\n          <Content className=\"backstage-content\" >\n            <Route exact path=\"/admin/\" component={Default} />\n            <Route exact path=\"/admin/user-management\" component={UserList} />\n            <Route exact path=\"/admin/article-management\" component={ArticleList} />\n            <Route exact path=\"/admin/category-management\" component={CategoryList} />\n            <Route exact path=\"/admin/banner-management\" component={BannerList} />\n          </Content>\n\n          <Footer style={{ textAlign: 'center' }}>开发者技术交流社区 ©2020 Created by deng yu</Footer>\n        </Layout>\n      </Layout>\n    )\n  }\n}\n\nexport default BackStage;","import { request } from '../request';\nimport {\n  GetArticleListParamsType,\n  GetArticleDataParamsType,\n  AddCommentParamsType,\n  AddArticleParamsType,\n} from './data';\n\n/**\n * 获取文章列表\n * @param params 关键字keyword、分类typeId、页码page、每页条数count\n */\nconst getArticleList = (params: GetArticleListParamsType) => {\n  return request.get('/article/get/list', params);\n}\n\n/**\n * 获取特殊类型的文章列表\n * @param type 榜单类型（目前仅支持 hot、popular）\n */\nconst getArticleListOfType = (type: string) => {\n  return request.get(`/article/get/list/${type}`, {});\n}\n\n/**\n * 获取指定用户（_id）发布过的文章列表\n * @param params 用户_id\n */\nconst getArticleListOfUser = (params: GetArticleDataParamsType) => {\n  return request.get('/article/get/list/user', params);\n}\n\n/**\n * 获取文章详情\n * @param params 文章_id\n */\nconst getArticleDetails = (params: GetArticleDataParamsType) => {\n  return request.get('/article/get/details', params);\n}\n\n/**\n * 获取文章评论\n * @param params 文章_id\n */\nconst getArticleComments = (params: GetArticleDataParamsType) => {\n  return request.get('/article/get/comments', params);\n}\n\n/**\n * 评论文章\n * @param params 文章_id 、 评论内容content\n */\nconst addArticleComment = (params: AddCommentParamsType) => {\n  return request.post('/article/add/comment', params);\n}\n\n/**\n * 点赞文章\n * @param params 文章_id\n */\nconst praiseArticle = (params: GetArticleDataParamsType) => {\n  return request.post('/article/update/likes', params);\n}\n\n/**\n * 发表文章\n * @param params 文章字段\n */\nconst addArticle = (params: AddArticleParamsType) => {\n  return request.post('/article/add', params);\n}\n\n/**\n * 修改文章\n * @param params 文章字段\n */\nconst updateArticle = (params: AddArticleParamsType) => {\n  return request.post('/article/update', params);\n}\n\n/**\n * 删除文章\n * @param params 文章_id\n */\nconst deleteArticle = (params: GetArticleDataParamsType) => {\n  return request.post('/article/delete', params);\n}\n\n/**\n * 收藏文章\n */\nconst collectArticle = (params: GetArticleDataParamsType) => {\n  return request.post('/article/add/collection', params);\n}\n\n/**\n * 获取用户的收藏列表\n */\nconst getCollectionList = (params: GetArticleDataParamsType) => {\n  return request.get('/article/get/collections', params)\n}\n\n/**\n * 取消收藏\n */\nconst cancelCollection = (params: GetArticleDataParamsType) => {\n  return request.post('/article/cancel/collection', params);\n}\n\nexport {\n  getArticleList,\n  getArticleListOfUser,\n  getArticleListOfType,\n  getArticleDetails,\n  getArticleComments,\n  getCollectionList,\n  cancelCollection,\n  addArticle,\n  addArticleComment,\n  praiseArticle,\n  collectArticle,\n  updateArticle,\n  deleteArticle,\n}","import { request } from '../request';\nimport {\n  LoginParamsType,\n  GetUserDataParamsType,\n  UpdateDataParamsType,\n  UpdateAvatarParamsType,\n  UpdatePasswordParamsType,\n} from './data';\n\n/**\n * 登录\n */\nconst login = (params: LoginParamsType) => {\n  return request.post('/user/login', params);\n}\n\n/**\n * 注册\n */\nconst register = (params: LoginParamsType) => {\n  return request.post('/user/register', params);\n}\n\n/**\n * 退出\n */\nconst logout = () => {\n  return request.post('/user/logout', {});\n}\n\n/**\n * 获取当前登录人的信息\n */\nconst getPersonalData = () => {\n  return request.get('/user/get/personaldata', {});\n}\n\n/**\n * 获取用户资料\n */\nconst getUserData = (params: GetUserDataParamsType) => {\n  return request.get('/user/get/data', params);\n}\n\n/**\n * 修改个人基本资料\n */\nconst updateUserData = (params: UpdateDataParamsType) => {\n  return request.post('/user/update/data', params);\n}\n\n/**\n * 修改头像\n */\nconst updateAvatar = (params: UpdateAvatarParamsType) => {\n  return request.post('/user/update/avatar', params);\n}\n\n/**\n * 修改密码\n */\nconst updatePassword = (params: UpdatePasswordParamsType) => {\n  return request.post('/user/update/password', params);\n}\n\n/**\n * 上传头像\n */\nconst uploadAvatar = (params: any) => {\n  return request.filePost('/img/upload/avatar', params);\n}\n\nexport {\n  login,\n  register,\n  logout,\n  getPersonalData,\n  getUserData,\n  updatePassword,\n  updateAvatar,\n  updateUserData,\n  uploadAvatar,\n}","import { request } from '../request';\n\n/**\n * 获取分类列表\n */\nconst getCategoryList = () => {\n  return request.get('/category/list', {});\n}\n\nexport {\n  getCategoryList,\n}"],"sourceRoot":""}