{"version":3,"sources":["server/request.ts","pages/setting-center/components/SetingNav/index.tsx","pages/setting-center/components/EditProfile/index.tsx","pages/setting-center/components/UpdatePassword/index.tsx","pages/setting-center/service.ts","pages/setting-center/index.tsx","pages/home-page/service.ts","components/Header/index.tsx","assets/logo.png","pages/home-page/_mock.ts"],"names":["instance","axios","create","baseURL","timeout","withCredentials","interceptors","request","use","config","headers","error","console","warn","Promise","reject","response","data","url","params","get","post","qs","stringify","SettingNav","linkNav","title","link","className","this","map","item","to","props","type","key","React","Component","EditProfile","onSaveProfile","profile","avatar","undefined","upLoadImg","e","file","target","files","formdata","FormData","append","upLoadAvatar","bind","src","alt","onChange","placeholder","value","username","setUsername","profession","setProfession","company","setCompany","motto","setMotto","onClick","UpdatePassword","onHandleOldPasswd","setState","oldPasswd","onHandleNewPasswd","newPasswd","onHandleRNewPasswd","rNewPasswd","onSavePassword","state","message","oldPassword","newPassword","postAvatar","filePost","editProfile","editAvatar","updatePassword","SettingCenter","componentDidMount","getPersonalData","then","res","onHandleUsername","onHandleProfession","onHandleCompany","onHandleMotto","path","success","msg","match","component","Header","getArticleCategory","getArticleList","userLogin","userRegister","userLogout","logo","require","NAV_LIST","module","exports","BASE_URL","Mock","mock"],"mappings":"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","file":"static/js/10.99b502a5.chunk.js","sourcesContent":["import axios from 'axios';\nimport qs from 'qs';\n\n/**\n * 自定义实例默认值\n */\nconst instance = axios.create({\n  baseURL: 'http://127.0.0.1',\n  timeout: 5000, // 请求超时时间\n  withCredentials: true,\n});\n\n/**\n * 添加请求拦截器 ，意思就是发起请求接口之前做什么事，一般都会发起加载一个loading\n */\ninstance.interceptors.request.use(\n  config => {\n    // 在发送请求之前做些什么（... 这里写你的展示loading的逻辑代码 ）\n    // 获取token，配置请求头\n    config.headers['Content-Type'] = 'application/x-www-form-urlencoded';\n    return config;\n  },\n  error => {\n    // 对请求错误做些什么，处理这个错误\n    // 可以直接处理或者展示出去,toast show()\n    console.warn(error);\n    return Promise.reject(error);\n  }\n);\n/**\n * 添加响应拦截器\n */\ninstance.interceptors.response.use(\n  response => {\n    let res = response.data;\n    return res;\n  },\n  error => {\n    //响应错误\n    // console.log(error)\n    return Promise.reject(error);\n  }\n)\n/**\n * 使用es6中的类，进行简单封装\n */\nexport class request {\n  // 使用async ... await\n  static async get(url: string, params: any) {\n    return await instance.get(url, {\n      params: params\n    });\n  }\n  static async post(url: string, params: any) {\n    return await instance.post(url, qs.stringify(params));\n  }\n  static async filePost(url: string, params: any) {\n    return await instance.post(url, params);\n  }\n};","import React from 'react';\nimport './style.less';\nimport { Link } from 'react-router-dom';\nimport { SettingNavPropsType } from '../../data';\n\nclass SettingNav extends React.Component<SettingNavPropsType> {\n  private linkNav = [\n    { title: '个人资料', link: 'profile' },\n    { title: '修改密码', link: 'password' },\n    { title: '账号关联', link: 'account' },\n  ]\n  render() {\n    return (\n      <nav className=\"setting-nav\">\n        <div className=\"container\">\n          {this.linkNav.map(item => (\n            <Link to={`/user/setting/${item.link}`}\n              className={item.link === this.props.type ? 'link' : ''}\n              key={item.link}\n            >{item.title}</Link>\n          ))}\n        </div>\n      </nav>\n    )\n  }\n}\n\nexport default SettingNav;","import React from 'react';\nimport { EditProfilePropsType } from '../../data';\n\nconst BASE_URL = \"http://127.0.0.1\";\n\nclass EditProfile extends React.Component<EditProfilePropsType, any> {\n  constructor(props: EditProfilePropsType) {\n    super(props);\n    \n    this.upLoadImg = this.upLoadImg.bind(this);\n  }\n  /**\n   * 保存\n   */\n  onSaveProfile = () => {\n    const params = this.props.profile;\n    params.avatar = undefined;\n    this.props.onSaveProfile(params);\n  }\n\n  /**\n   * 上传头像\n   */\n  upLoadImg = (e: any) => {\n    let file = e.target.files[0];\n    const formdata = new FormData();\n    formdata.append('file', file);\n    \n    this.props.upLoadAvatar(formdata);\n  }\n\n  render() {\n    const { profile } = this.props;\n\n    return (\n      <div className=\"card\">\n        <h2>个人资料</h2>\n        <div className=\"row first-row\">\n          <div className=\"label\">头像</div>\n          <div className=\"input\">\n            <div className=\"avatar\">\n              <img src={`${BASE_URL}${profile.avatar}`} alt=\"\" />\n            </div>\n            <div className=\"action\">\n              <p>支持 jpg、png 格式大小 5M 以内的图片</p>\n              <input type=\"file\" onChange={this.upLoadImg} />\n              <button className=\"save\">点击上传</button>\n            </div>\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"label\">用户名</div>\n          <div className=\"input\">\n            <input type=\"text\"\n              placeholder=\"填写你的用户名\"\n              value={profile.username}\n              onChange={(e) => this.props.setUsername(e.target.value)}\n            />\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"label\">职位</div>\n          <div className=\"input\">\n            <input type=\"text\"\n              placeholder=\"填写你的职业\"\n              value={profile.profession}\n              onChange={(e) => this.props.setProfession(e.target.value)}\n            />\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"label\">公司</div>\n          <div className=\"input\">\n            <input type=\"text\"\n              placeholder=\"填写你的公司\"\n              value={profile.company}\n              onChange={(e) => this.props.setCompany(e.target.value)}\n            />\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"label\">个人介绍</div>\n          <div className=\"input\">\n            <input type=\"text\"\n              placeholder=\"填写职业技能、擅长的事情、喜欢的事情\"\n              value={profile.motto}\n              onChange={(e) => this.props.setMotto(e.target.value)}\n            />\n          </div>\n        </div>\n        <button className=\"save\" onClick={this.onSaveProfile}>保存</button>\n      </div>\n    )\n  }\n}\n\nexport default EditProfile;","import React from 'react';\nimport { UpdatePasswordPropsType, UpdatePasswordStateType, UpdatePasswordParamsType } from '../../data';\nimport { message } from 'antd';\n\nclass UpdatePassword extends React.Component<UpdatePasswordPropsType, UpdatePasswordStateType> {\n  constructor(props: UpdatePasswordPropsType) {\n    super(props);\n    this.state = {\n      oldPasswd: '',\n      newPasswd: '',\n      rNewPasswd: '',\n    }\n    this.onHandleOldPasswd = this.onHandleOldPasswd.bind(this);\n    this.onHandleNewPasswd = this.onHandleNewPasswd.bind(this);\n    this.onHandleRNewPasswd = this.onHandleRNewPasswd.bind(this);\n  }\n\n  /**\n   * 双向绑定\n   */\n  onHandleOldPasswd = (e: any) => {\n    this.setState({ oldPasswd: e.target.value });\n  }\n  onHandleNewPasswd = (e: any) => {\n    this.setState({ newPasswd: e.target.value });\n  }\n  onHandleRNewPasswd = (e: any) => {\n    this.setState({ rNewPasswd: e.target.value });\n  }\n\n  /**\n   * 保存修改\n   */\n  onSavePassword = () => {\n    const { oldPasswd, newPasswd, rNewPasswd } = this.state;\n    if (newPasswd !== rNewPasswd) {\n      message.error('两次输入的新密码不一致！', 2);\n    } else {\n      const params: UpdatePasswordParamsType = {\n        oldPassword: oldPasswd,\n        newPassword: newPasswd,\n      };\n      this.props.onSavePassword(params);\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"card\">\n        <h2>修改密码</h2>\n        <div className=\"row\">\n          <div className=\"label\">原密码</div>\n          <div className=\"input\">\n            <input type=\"password\"\n              placeholder=\"请输入原密码\"\n              value={this.state.oldPasswd}\n              onChange={this.onHandleOldPasswd}\n            />\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"label\">新密码</div>\n          <div className=\"input\">\n            <input type=\"password\"\n              placeholder=\"请输入新密码\"\n              value={this.state.newPasswd}\n              onChange={this.onHandleNewPasswd}\n            />\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"label\">确认新密码</div>\n          <div className=\"input\">\n            <input type=\"password\"\n              placeholder=\"确认新密码\"\n              value={this.state.rNewPasswd}\n              onChange={this.onHandleRNewPasswd}\n            />\n          </div>\n        </div>\n        <button className=\"save\" onClick={this.onSavePassword}>保存</button>\n      </div>\n    )\n  }\n}\n\nexport default UpdatePassword;","import { request } from '../../server/request';\nimport { ProfileType, UpdatePasswordParamsType, UpdateAvatarParamsType } from './data';\n\n/**\n * 上传头像\n */\nexport function postAvatar(params: any) {\n  return request.filePost('/img/upload', params);\n}\n\n/**\n * 修改个人资料\n */\nexport function editProfile(params: ProfileType) {\n  return request.post('/user/edit/profile', params);\n}\n\n/**\n * 修改头像\n */\nexport function editAvatar(params: UpdateAvatarParamsType) {\n  return request.post('/user/edit/avatar', params);\n}\n\n/**\n * 修改密码\n */\nexport function updatePassword(params: UpdatePasswordParamsType) {\n  return request.post('/user/edit/password', params);\n}","import React from 'react';\nimport './style.less';\nimport Header from '../../components/Header';\nimport SettingNav from './components/SetingNav';\nimport EditProfile from './components/EditProfile';\nimport UpdatePassword from './components/UpdatePassword';\nimport { postAvatar, editProfile, updatePassword, editAvatar } from './service';\nimport { getPersonalData } from '../home-page/service';\nimport { ProfileType, UpdatePasswordParamsType, UpdateAvatarParamsType } from './data';\nimport { message } from 'antd';\nimport '../home-page/_mock';\n\nclass SettingCenter extends React.Component<any, ProfileType> {\n  state = {\n    username: '',\n    profession: '',\n    company: '',\n    motto: '',\n    avatar: '',\n  }\n\n  componentDidMount = () => {\n    getPersonalData().then((res: any) => {\n      if (res.state !== 302) {\n        this.setState({\n          avatar: res.data.avatar,\n          username: res.data.username,\n          profession: res.data.profession,\n          company: res.data.company,\n          motto: res.data.motto,\n        });\n      }\n    })\n  }\n\n  /**\n   * 双向绑定 用户名、职业、公司、个人简介\n   */\n  onHandleUsername = (username: string) => {\n    this.setState({ username })\n  }\n  onHandleProfession = (profession: string) => {\n    this.setState({ profession });\n  }\n  onHandleCompany = (company: string) => {\n    this.setState({ company });\n  }\n  onHandleMotto = (motto: string) => {\n    this.setState({ motto });\n  }\n\n  /**\n   * 上传图片\n   */\n  upLoadImg = (params: any) => {\n    postAvatar(params).then(res => {\n      this.setState({ avatar: res.data.path });\n      const params: UpdateAvatarParamsType = { avatar: res.data.path };\n      editAvatar(params).then((res: any) => {\n        if (res.state === 200) {\n          message.success('修改成功！', 2);\n        } else {\n          message.error(res.msg, 2);\n        }\n      });\n    });\n  }\n\n  /**\n   * 保存修改个人资料\n   */\n  onSaveProfile = (params: ProfileType) => {\n    editProfile(params).then((res: any) => {\n      if (!res.state) {\n        message.success('修改成功！', 1.5);\n      } else {\n        message.error(res.msg, 1.5);\n      }\n    })\n  }\n\n  /**\n   * 保存修改密码\n   */\n  onSavePassword = (params: UpdatePasswordParamsType) => {\n    updatePassword(params).then((res: any) => {\n      if (!res.state) {\n        message.success('修改成功', 2);\n      } else {\n        message.error(res.msg, 2);\n      }\n    })\n  }\n\n  render() {\n    const profile = this.state;\n\n    const type = this.props.match.params.type;\n    let component = null;\n    switch (type) {\n      case 'profile':\n        component = <EditProfile\n          upLoadAvatar={this.upLoadImg}\n          setUsername={this.onHandleUsername}\n          setProfession={this.onHandleProfession}\n          setCompany={this.onHandleCompany}\n          setMotto={this.onHandleMotto}\n          profile={profile} onSaveProfile={this.onSaveProfile}\n        />;\n        break;\n      case 'password':\n        component = <UpdatePassword onSavePassword={this.onSavePassword} />;\n        break;\n    }\n\n    return (\n      <>\n        <Header />\n        <SettingNav type={type} />\n        <main className=\"edit-profile\">\n          <div className=\"container\">\n            {component}\n          </div>\n        </main>\n      </>\n    )\n  }\n}\n\nexport default SettingCenter;","import { request } from '../../server/request';\nimport { ArticleListParamsType, UserLoginParamsType } from './data';\n\n/**\n * 获取文章分类信息\n */\nexport function getArticleCategory() {\n  return request.get('/category/list', {});\n}\n\n/**\n * 获取文章列表\n */\nexport function getArticleList(params: ArticleListParamsType) {\n  return request.get('/article/list', params);\n}\n\n/**\n * 获取个人资料\n */\nexport function getPersonalData() {\n  return request.get('/user/personaldata', {});\n}\n\n/**\n * 用户登录\n */\nexport function userLogin(params: UserLoginParamsType) {\n  return request.post('/user/login', params);\n}\n\n/**\n * 用户注册\n */\nexport function userRegister(params: UserLoginParamsType) {\n  return request.post('/user/register', params);\n}\n\n/**\n * 退出登录\n */\nexport function userLogout() {\n  return request.post('/user/logout', {});\n}","import React from 'react';\nimport { Link } from 'react-router-dom'\nimport { NavListType } from './data';\nimport './style.less';\n\nconst logo = require('../../assets/logo.png');\nconst NAV_LIST: NavListType[] = [\n  { title: '首页', link: '/' },\n  { title: '专题', link: '/a' },\n  { title: '面试', link: '/b' },\n  { title: '小册', link: '/c' },\n  { title: 'APP', link: '/d' },\n  { title: 'GitHub', link: '/e' }\n];\n\nclass Header extends React.Component {\n  render() {\n    return (\n      <header className=\"header\">\n        <div className=\"container\">\n          <img src={logo} alt=\"\" className=\"logo\" />\n          <ul className=\"nav-list\">\n            {\n              NAV_LIST.map((item: NavListType) => (\n                <li key={item.title}><Link to={item.link}>{item.title}</Link></li>\n              ))\n            }\n          </ul>\n        </div>\n      </header>\n    )\n  }\n}\n\nexport default Header;","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAK0AAAAVCAYAAAA0Nm5bAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjBBRTE0MTM0RUM1MTFFMkFGOTM4RDRGNDg3QkVGOEQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NjBBRTE0MTQ0RUM1MTFFMkFGOTM4RDRGNDg3QkVGOEQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2MEFFMTQxMTRFQzUxMUUyQUY5MzhENEY0ODdCRUY4RCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2MEFFMTQxMjRFQzUxMUUyQUY5MzhENEY0ODdCRUY4RCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PpT2C0UAAASVSURBVHja7BqLVeMwLPBuAa/gFXIj5EYII/hGCCOEEXIjpCOkI7gjuCOYEUJ6T7kTQvKvBVqI3tOjxJKjn2VZzt08z9UG7woK/j5vprgM3C9YL3iKXBeg64DGA/0tg4voemnwgJ8Fq+9iOC3Y3krQrqAFmpMiPfx+WPBw40GrA7p+Z2gWHJGvbyJoOahBkRP8XnC/+fbLQ3ftu+l9JCNN8PtxwT+bP78E3DH4yGTdmwtaBQGrIFifEurDdXtxiTXSaVEMiN7B/5qhm9ECojDAeCPsFCFeSffTFmmB18L/KmFHclC/TomO5/hMQu1dImMInjLKhxm9c5V1QhjyMZZVC3p1SK+Vvnul2zzP9fwfKsAJ/h/RMw5XGOCvW9DOr6Fl+JoFPaLBPB7GMb2DMc3M5ZEMdKyHsY6RmdOnRu+yoL9FctWCLlh2i+YYAu9rA3wT0utcGTviD05vSkPtbGYZBmH+mviYg1bQiwO36sYF7YgMUiUGrWUCrUcOwM8VUqYTjOeBjs5lhIDxgFS+1Zl1QtAqZLRWCDCXoUtDFiMe0xE+J/CVyNjNeWAYWSlYsrC4oB3Rswnk6NBz7GNFdLaI3pLnb4K2F4ImFLReGFOC4ftAZqzQyu2Z4JwE2tUxDWNsJyw0Kdv0kWxkmGdDwAa+wAYS3zkypkDP+H3gsh2SU8q0GBSzECQZh0BM/NWNBu0cYa4SAyA0HtrqQ8HmGQN4CGTFyGwEB0syW8HAdBFOTBmlM21gz+TLkTE301oyv42UepUQtI4Eew8+0QHbS7rhBDj9IIXwAXqx64HgmTlZnns7pGHeo0BzhHEN9OtN0g5kauB3A+M7oDmQw0+L+KrEQ9Ha8on1eTFPSJfQu0r5cmXkugfSIUvBOww6nOH21y5D1kfULtVE5iOM75h3+KgNSKbVTBFtLphpVaSkCGXVhhwOB0LTofo19B6pVkwFl1gehd5XwlcqY8pBDJcsnI6pfp6Z+nwMHMgMwx8FqXtAT8XNFZQHFanzPNkGNSoH2kCJI8nsI1tvFdjWPqo8KJGxJGilbb7NDFra9TCopMI+toHOxRsMXS7s4RasgjR/qVuSXWSL6wJb0R7RKEJzhBKhLSgNMK3J4NlHdMHlDcdnAnyXkjH1CtcQW1JZK+iv1oK/KBjSOz5Az/8XU8ZgP42C/ibWp+VWoGdWQUmmLWl50baOlHE60vtMKT0U04biMoph+ta4HfQRLa8SGXMPYnSHqgtaXriF5WG+tYU1kVYYjQnK06O5OqlPy+EonCxLgrbkcoGr66ywBc2RixHcJ3TEQVguB7TYOWPmJUHp5cKQaLsUGXOD1jHJIPdyQTOXTBToRUjKZcSbPq2L1BLcLZmL8IXGNVlFa1skVtOMkQOijdThGunimHkUyGFJYDSRem0E2rXWbhNswPE1CQkhR8YuI1iHQL3ckAsDKxykuMxPE5TkZ8VcKHiY45+f7raPwK/280kHdeDPzRx5nyZu8H4wCh/VKPjIJPcg+X0+U9sy7aeAgq+XNJzU8YVKjQL2YTPVFrTXBh1k2xoC+YhaQ9sH9wK8CDAAxVF6p95oy2sAAAAASUVORK5CYII=\"","import Mock from 'mockjs';\n\nconst BASE_URL = 'http://127.0.0.1:3000'\n\n/**\n * 分类列表\n */\nMock.mock(`${BASE_URL}/category/list`, 'get', {\n  \"msg\": \"分类列表\",\n  \"state\": 0,\n  \"data\": [\n    {\n      \"_id\": \"5e6a55a0cf380000e4005807\",\n      \"typeId\": 1001,\n      \"typeName\": \"前端\"\n    },\n    {\n      \"_id\": \"5e6a55b0cf380000e4005808\",\n      \"typeId\": 1002,\n      \"typeName\": \"后台\"\n    },\n    {\n      \"_id\": \"5e6a55cbcf380000e4005809\",\n      \"typeId\": 1003,\n      \"typeName\": \"网络安全\"\n    }\n  ]\n})\n\n/**\n * 全部文章列表\n */\nMock.mock(`${BASE_URL}/article/list?page=1&typeId=0&keyword=`, 'get', {\n  \"msg\": \"文章列表\",\n  \"state\": 0,\n  \"data\": [\n    {\n      \"ids\": \"article_1fxfidxtcj\",\n      \"title\": \"第三篇测试文章\",\n      \"des\": \"测试\",\n      \"date\": \"2020-03-12T16:21:02.478Z\"\n    },\n    {\n      \"ids\": \"article_irkyj84lgff\",\n      \"title\": \"第二篇测试文章\",\n      \"des\": \"测试简述\",\n      \"date\": \"2020-03-12T15:54:54.793Z\"\n    },\n    {\n      \"ids\": \"article_23cch5biicl\",\n      \"title\": \"第一篇测试文章\",\n      \"des\": \"测试简述\",\n      \"date\": \"2020-03-12T15:50:22.083Z\"\n    }\n  ]\n})\n\n/**\n * 登录状态下的个人信息\n */\nMock.mock(`${BASE_URL}/user/personaldata`, 'get', {\n  \"msg\": \"dtec_9h4mjf4wb87\",\n  \"state\": 0,\n  \"data\": {\n    \"avatar\": 'http://127.0.0.1:8000/img/avatar/default.png',\n    \"ids\": \"user_lheyk2ocqxe\",\n    \"username\": \"dtec_9h4mjf4wb87\",\n    \"sex\": \"保密\",\n    \"motto\": \"\",\n    \"profession\": \"\",\n    \"company\": \"\",\n    \"_id\": \"5e675a60ea0bf43770597926\",\n    \"password\": \"336498\",\n    \"tel\": \"13628032230\",\n    \"createdDate\": \"2020-03-10T09:14:08.114Z\",\n    \"__v\": 0\n  }\n})"],"sourceRoot":""}